## 树形结构

### 二叉树
每个节点下最多有2个节点

#### 平衡二叉树
为解决二叉树高度不稳定而引入平衡算法，使得二叉树节点层级相差不超过2

#### 红黑树
为优化平衡二叉树的维护效率，即提高节点删除和插入效率\
保证根节点及叶节点都是黑的，保证每条路径内有相同的黑节点(null也为黑节点)\
当插入、删除、搜索次数都相近时红黑树比平衡二叉树有更好的性能

### B树
多叉树，平衡多路查找树\
可以理解为在一条直线上将点分布到不同的线段上，当查询点时查询所属线段就能加快查询的速度\
为减少二叉树的高度以平衡查找速度\
B树按左小右大排序，当某个节点关键字数量达到B树的阶数-1，就会将中间节点升级为父节点，左右两边拆分为新的子节点\
删除节点时，当节点关键字数量少于ceil(B树阶数/2)-1，就会发生节点合并，优先在子节点获取，当子节点没有符合条件时向父节点获取，然后取中间值放在父节点

### B+树
B+树的所有数据都只存在叶(最底层节点)上，其他节点不保存数据\
查询速度更平衡，查询到每个关键字的次数都是一样的\
B+树的叶节点数据都是有序的，对排序有更好的支持，数据紧密性很高，缓存的命中率也会比B树高\
B+树遍历整棵树只需要遍历所有的叶子节点即可，有利于全表扫描\
当查询数据离根节点近的时候，B树的查询速度更快

### B*树
B+树的变体\
在树的非根非叶节点增加兄弟指针\
B*树在一个节点满时会优先查询兄弟节点是否满，兄弟节点未满则会把数据移入兄弟节点并更新父节点指针，如果兄弟节点满了则会在原节点和兄弟节点直接插入新节点并移入1/3的数据\
B*树比B+树的空间利用率更高

### R树
B树向多维发展的一种形式\
将B树分割直线的想法运用到空间上，使用对应空间的单位来完成空间的分割\
常用于空间结构数据的存储，如地理位置这样的(x,y)点\
可以显著减少对空间结构数据查询时的遍历情况

#### R树分割数据的方法
使用对应空间的最小边界单位作为分割依据\
![](https://img-blog.csdnimg.cn/20210625214925603.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pob25na2V5dWFuY2hvbmdxaW5n,size_16,color_FFFFFF,t_70)
1. 先按不同分类对目标进行拆分，例如餐馆、酒店
2. 将目标位置以最小矩形包裹
3. 以一定的阶数为单位，将相同数量的邻近目标以最小矩阵包裹
4. 以一定量的点或面构成最小外接矩阵，依次操作，将空间数据进行分割

#### R树查询方法

* 面相交查询
    查询一个范围中所有的叶节点
    > **线段和矩形的相交判断**
    > ![](https://img2020.cnblogs.com/blog/1990595/202012/1990595-20201214202648175-1395518376.png)
    > 
    1. 使用对应查询矩形按层级与存储在R树中的矩形查询相交
    2. 抵达对应叶节点
* 点查询
    查询距离点最近的n个点\
    > 点到矩形的距离可做一个半径为r的圆，当圆与矩形相交时，r即为最短距离
    > 
    1. 在同一层级中分别查询出最短距离pr
    2. 选择距离最近的矩形遍历其子节点，并得到最短距离rMin
    3. 返回父节点，将rMin与pr进行比较，如果$pr<rMin$则遍历子节点，查询是否可以得出新的rMin
    4. 根据rMin得出当前层级的最匹配的搜索结果，然后重复操作
    5. 当查询多个点时，需要最短的前n个距离

#### R树插入

* 插入点 
  1. 从根节点开始，按层级遍历，查询添加点后扩张最小且面积最小的同级节点
  2. 如果最底部的父节点元素未满，则直接插入，如果元素已满则分裂为两个节点
  3. 按层级向上遍历，如果父节点元素未满则直接插入，元素已满则进行分裂
* 插入R树
  和插入点的操作相同，只是会根据R树高度，插入到对应的层级中

## R+树
R+树是兄弟节点之间无空间重叠的R树\

**与R树对比**

优点\
能大大降低无效搜索，例如在单点位范围的查询中，不会搜索到包含目标点位但由于子元素距离较远导致的数据

缺点\
数据操作需要比较兄弟节点之间的重叠度，导致操作效率很低

## R*树
R*树是优化R树数据操作的变种(并非R+树变种)\

**与R树对比**

优点\
通过强制重新插入等方法使R树数据操作效率提高

缺点\
在数据量大或数据维度增大的情况下，空间重叠度会显著上升

## 树形结构的共同点
采用二分法和数据平衡策略来提升查找数据的速度\
比单向链表有更快的查询速度



# 堆



# 字典

## 散列表|哈希表
通过哈希函数进行映射，当哈希冲突发生时，通过单向链表或二叉树进行冲突解决\
常用作字典

## FST|Finite State Transducers
有穷状态转换器\
常用于倒序索引\
比哈希查询慢，但体积更小

### FST存储过程
* 拆分字符串为字符，每个字符为一个节点，a-a-a-a
* 将每个节点与当前FST节点依次做比较，相同则比较下一节点，不同则在父节点上新建新的子节点
* 将数据存入末节点



# 图

# 数组
内存中一块连续的区域

# 链表
非连续区域依据索引形成的表，较数组有更大的增删效率，但更低的查询效率

# 跳表
通过加入链表的多级索引提高链表的查询效

# 栈
后出先进的线性表

# 队列
先出先进的线性表